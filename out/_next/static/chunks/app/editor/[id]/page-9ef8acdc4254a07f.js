(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{327:function(e,t,l){Promise.resolve().then(l.bind(l,3601))},3601:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return U}});var s=l(3827),a=l(4090),r=l(7907),n=l(3879),o=l(3013),i=l(43),c=l(699),d=l(9990),u=l(6651),m=l(2020),x=l(8222);let h=(0,m.Ue)((e,t)=>({event:null,themes:[],currentTheme:null,selectedBlockIndex:null,previewMode:"mobile",activePanel:"data",isDirty:!1,isSaving:!1,isLoading:!1,loadEvent:async l=>{e({isLoading:!0});try{var s;let a=await x.h.getEvent(l),{themes:r}=t(),n=null;if(r.length>0&&(null===(s=a.theme)||void 0===s?void 0:s.id)){let e=r.find(e=>e.slug===a.theme.id);e&&(n={...e.config},a.theme.customColors&&Object.entries(a.theme.customColors).forEach(e=>{let[t,l]=e;t in n.colors&&(n.colors[t]=l)}))}e({event:a,currentTheme:n,isLoading:!1,isDirty:!1})}catch(t){throw console.error("Failed to load event:",t),e({isLoading:!1}),t}},loadThemes:async()=>{try{var l;let s=await x.h.getThemes();e({themes:s});let{event:a}=t();if(null==a?void 0:null===(l=a.theme)||void 0===l?void 0:l.id){let t=s.find(e=>e.slug===a.theme.id);if(t){let l={...t.config};a.theme.customColors&&Object.entries(a.theme.customColors).forEach(e=>{let[t,s]=e;t in l.colors&&(l.colors[t]=s)}),e({currentTheme:l})}}}catch(e){console.error("Failed to load themes:",e)}},updateData:(l,s)=>{let{event:a}=t();if(!a)return;let r=function(e,t,l){let s=t.split("."),a={...e},r=a;for(let e=0;e<s.length-1;e++)r[s[e]]={...r[s[e]]},r=r[s[e]];return r[s[s.length-1]]=l,a}(a.data,l,s);e({event:{...a,data:r},isDirty:!0})},changeTheme:l=>{let{event:s,themes:a}=t();if(!s)return;let r=a.find(e=>e.slug===l);r&&e({event:{...s,theme:{id:l,customColors:{}}},currentTheme:{...r.config},isDirty:!0})},updateCustomColor:(l,s)=>{let{event:a,currentTheme:r}=t();if(!a||!r)return;let n={...a.theme.customColors,[l]:s},o={...r.colors,[l]:s};e({event:{...a,theme:{...a.theme,customColors:n}},currentTheme:{...r,colors:o},isDirty:!0})},reorderBlocks:(l,s)=>{let{event:a}=t();if(!a)return;let r=[...a.blocks],[n]=r.splice(l,1);r.splice(s,0,n);let o=r.map((e,t)=>({...e,order:t}));e({event:{...a,blocks:o},isDirty:!0})},toggleBlock:l=>{let{event:s}=t();if(!s)return;let a=[...s.blocks];a[l]={...a[l],enabled:!a[l].enabled},e({event:{...s,blocks:a},isDirty:!0})},setBlockVariant:(l,s)=>{let{event:a}=t();if(!a)return;let r=[...a.blocks];r[l]={...r[l],variant:s},e({event:{...a,blocks:r},isDirty:!0})},selectBlock:t=>{e({selectedBlockIndex:t})},setPreviewMode:t=>{e({previewMode:t})},setActivePanel:t=>{e({activePanel:t})},saveEvent:async()=>{let{event:l}=t();if(l){e({isSaving:!0});try{await x.h.updateEvent(l.id,{data:l.data,theme:l.theme,blocks:l.blocks,seating:l.seating}),e({isDirty:!1,isSaving:!1})}catch(t){throw console.error("Failed to save event:",t),e({isSaving:!1}),t}}},publishEvent:async()=>{let{event:l,saveEvent:s}=t();if(l){t().isDirty&&await s();try{let t=await x.h.publishEvent(l.id);e({event:t})}catch(e){throw console.error("Failed to publish event:",e),e}}},updateSeating:l=>{let{event:s}=t();s&&e({event:{...s,seating:l},isDirty:!0})},enabledBlocks:()=>{let{event:e}=t();return e?e.blocks.filter(e=>e.enabled).sort((e,t)=>e.order-t.order):[]},mergedTheme:()=>t().currentTheme}));var g=l(313),f=l(7135),b=l(4048),v=l(1216),p=l(4067),j=l(7841),y=l(1930),N=l(4494),w=l(2169);let k={intro:"Заставка",hero:"Главный экран",greeting:"Приветствие",details:"Детали",countdown:"Обратный отсчёт",program:"Программа",location:"Место проведения",gallery:"Галерея",rsvp:"RSVP",story:"История",wishes:"Пожелания",dresscode:"Дресс-код","baby-info":"Информация о ребёнке",footer:"Футер"};function C(e){let{block:t,index:l,isSelected:a,onSelect:r,onToggle:n}=e,{attributes:o,listeners:i,setNodeRef:c,transform:d,transition:u,isDragging:m}=(0,b.nB)({id:"block-".concat(l)}),x={transform:v.ux.Transform.toString(d),transition:u};return(0,s.jsxs)("div",{ref:c,style:x,className:(0,w.cn)("flex items-center gap-2 p-3 rounded-lg transition-colors",m?"opacity-50":"",a?"bg-accent/10 border border-accent":"bg-white border border-muted-foreground/20",!t.enabled&&"opacity-60"),children:[(0,s.jsx)("button",{...o,...i,className:"cursor-grab active:cursor-grabbing text-muted hover:text-foreground",children:(0,s.jsx)(p.Z,{size:18})}),(0,s.jsx)("button",{onClick:r,className:"flex-1 text-left text-sm font-medium",children:k[t.type]||t.type}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:(0,w.cn)("p-1 rounded transition-colors",t.enabled?"text-accent":"text-muted"),children:t.enabled?(0,s.jsx)(j.Z,{size:16}):(0,s.jsx)(y.Z,{size:16})})]})}function z(){let{event:e,selectedBlockIndex:t,reorderBlocks:l,toggleBlock:a,selectBlock:r,setBlockVariant:n}=h(),o=(0,f.Dy)((0,f.VT)(f.we),(0,f.VT)(f.Lg,{coordinateGetter:b.is}));if(!e)return null;let{blocks:i}=e,c=null!==t?i[t]:null,d=c?N.l[c.type]:[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(f.LB,{sensors:o,collisionDetection:f.pE,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&l(parseInt(String(t.id).replace("block-","")),parseInt(String(s.id).replace("block-","")))},children:(0,s.jsx)(b.Fo,{items:i.map((e,t)=>"block-".concat(t)),strategy:b.qw,children:(0,s.jsx)("div",{className:"space-y-2",children:i.map((e,l)=>(0,s.jsx)(C,{block:e,index:l,isSelected:t===l,onSelect:()=>r(t===l?null:l),onToggle:()=>a(l)},"block-".concat(l)))})})}),c&&d.length>0&&(0,s.jsxs)("div",{className:"pt-4 border-t border-muted-foreground/10",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-muted mb-3",children:"Вариант отображения"}),(0,s.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,s.jsx)("button",{onClick:()=>n(t,e.value),className:(0,w.cn)("w-full p-3 rounded-lg text-left text-sm transition-colors",c.variant===e.value?"bg-accent text-white":"bg-muted-foreground/10 hover:bg-muted-foreground/20"),children:e.label},e.value))})]})]})}var D=l(2278);function S(){var e,t,l,a;let{event:r,updateData:n}=h();if(!r)return null;let{data:o}=r;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Имена"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(D.I,{label:"Имя 1",value:o.names.person1,onChange:e=>n("names.person1",e.target.value),placeholder:"Айдар"}),"wedding"===r.eventType&&(0,s.jsx)(D.I,{label:"Имя 2",value:o.names.person2||"",onChange:e=>n("names.person2",e.target.value),placeholder:"Дана"})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Дата и время"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(D.I,{label:"Дата",type:"date",value:o.date,onChange:e=>n("date",e.target.value)}),(0,s.jsx)(D.I,{label:"Время начала",type:"time",value:o.time||"",onChange:e=>n("time",e.target.value)}),(0,s.jsx)(D.I,{label:"Сбор гостей",type:"time",value:o.gatheringTime||"",onChange:e=>n("gatheringTime",e.target.value)})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Место проведения"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(D.I,{label:"Название",value:(null===(e=o.venue)||void 0===e?void 0:e.name)||"",onChange:e=>n("venue.name",e.target.value),placeholder:"Ресторан Той"}),(0,s.jsx)(D.I,{label:"Адрес",value:(null===(t=o.venue)||void 0===t?void 0:t.address)||"",onChange:e=>n("venue.address",e.target.value),placeholder:"ул. Абая 123, Алматы"}),(0,s.jsx)(D.I,{label:"Ссылка на карту",value:(null===(l=o.venue)||void 0===l?void 0:l.mapUrl)||"",onChange:e=>n("venue.mapUrl",e.target.value),placeholder:"https://maps.google.com/..."}),(0,s.jsx)(D.I,{label:"2GIS ID",value:(null===(a=o.venue)||void 0===a?void 0:a.twoGisId)||"",onChange:e=>n("venue.twoGisId",e.target.value),placeholder:"ID организации в 2GIS"})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Текст приглашения"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"На казахском"}),(0,s.jsx)("textarea",{value:o.greetingKz||"",onChange:e=>n("greetingKz",e.target.value),className:"w-full px-3 py-2 border border-muted-foreground/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Құрметті қонақ..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"На русском"}),(0,s.jsx)("textarea",{value:o.greetingRu||"",onChange:e=>n("greetingRu",e.target.value),className:"w-full px-3 py-2 border border-muted-foreground/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Уважаемый гость..."})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Дополнительно"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(D.I,{label:"Дресс-код",value:o.dressCode||"",onChange:e=>n("dressCode",e.target.value),placeholder:"Классический / Пастельные тона"}),(0,s.jsx)(D.I,{label:"Хэштег",value:o.hashtag||"",onChange:e=>n("hashtag",e.target.value),placeholder:"#АйдарДана2026"}),(0,s.jsx)(D.I,{label:"Дедлайн RSVP",type:"date",value:o.rsvpDeadline||"",onChange:e=>n("rsvpDeadline",e.target.value)})]})]})]})}var I=l(9259);function E(){let{event:e,themes:t,currentTheme:l,changeTheme:a,updateCustomColor:r}=h();return e&&l?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Выберите тему"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(t=>(0,s.jsxs)("button",{onClick:()=>a(t.slug),className:(0,w.cn)("relative rounded-xl overflow-hidden border-2 transition-all",e.theme.id===t.slug?"border-accent":"border-muted-foreground/20 hover:border-accent/50"),children:[(0,s.jsx)("div",{className:"aspect-[3/4] p-3",style:{backgroundColor:t.config.colors.primary},children:(0,s.jsxs)("div",{className:"w-full h-full rounded-lg flex flex-col items-center justify-center p-2",style:{backgroundColor:t.config.colors.secondary},children:[(0,s.jsx)("div",{className:"w-8 h-1 rounded mb-2",style:{backgroundColor:t.config.colors.accent}}),(0,s.jsx)("div",{className:"text-[8px] font-serif text-center",style:{color:t.config.colors.text,fontFamily:t.config.fonts.heading},children:"A & D"})]})}),(0,s.jsxs)("div",{className:"p-2 text-center bg-white",children:[(0,s.jsx)("p",{className:"text-xs font-medium truncate",children:t.name}),(0,s.jsx)("p",{className:"text-[10px] text-muted capitalize",children:t.tier})]}),e.theme.id===t.slug&&(0,s.jsx)("div",{className:"absolute top-2 right-2 w-5 h-5 bg-accent text-white rounded-full flex items-center justify-center",children:(0,s.jsx)(I.Z,{size:12})})]},t.slug))})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted mb-3",children:"Настройка цветов"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(F,{label:"Основной фон",value:l.colors.primary,onChange:e=>r("primary",e)}),(0,s.jsx)(F,{label:"Фон блоков",value:l.colors.secondary,onChange:e=>r("secondary",e)}),(0,s.jsx)(F,{label:"Акцентный цвет",value:l.colors.accent,onChange:e=>r("accent",e)}),(0,s.jsx)(F,{label:"Текст",value:l.colors.text,onChange:e=>r("text",e)})]})]})]}):null}function F(e){let{label:t,value:l,onChange:a}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"color",value:l,onChange:e=>a(e.target.value),className:"w-8 h-8 rounded cursor-pointer border border-muted-foreground/20"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>a(e.target.value),className:"w-20 px-2 py-1 text-xs border border-muted-foreground/20 rounded"})]})]})}var T=l(94),Z=l(4059),B=l(3416),G=l(7366),L=l(489),P=l(8584),M=l(492),R=l(8009);function O(){let{event:e}=h(),[t,l]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[m,g]=(0,a.useState)("");(0,a.useEffect)(()=>{(null==e?void 0:e.id)&&f()},[null==e?void 0:e.id]);let f=async()=>{if(null==e?void 0:e.id)try{let t=await x.h.getDashboard(e.id);l(t)}catch(e){R.default.error("Не удалось загрузить гостей")}finally{n(!1)}},b=async()=>{if((null==e?void 0:e.id)&&o.trim())try{await x.h.createGuest(e.id,{name:o.trim()}),i(""),f(),R.default.success("Гость добавлен")}catch(e){R.default.error("Ошибка добавления гостя")}},v=async()=>{if(!(null==e?void 0:e.id)||!m.trim())return;let t=m.split("\n").map(e=>e.trim()).filter(Boolean);if(0!==t.length)try{await x.h.createGuestsBulk(e.id,t),g(""),d(!1),f(),R.default.success("Добавлено ".concat(t.length," гостей"))}catch(e){R.default.error("Ошибка добавления гостей")}},p=async t=>{if(null==e?void 0:e.id)try{await x.h.deleteGuest(e.id,t),f(),R.default.success("Гость удалён")}catch(e){R.default.error("Ошибка удаления")}},j=async e=>{let t="https://shaq.kz".concat(e.personalLink);await (0,w.vQ)(t),R.default.success("Ссылка скопирована")},y=e=>{let t=(0,w.kU)(e.personalLink,e.name);window.open(t,"_blank")};if(!e)return null;let N=(null==t?void 0:t.stats)||{confirmed:0,declined:0,pending:0,totalGuests:0},k=(null==t?void 0:t.guests)||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N.confirmed}),(0,s.jsx)("div",{className:"text-xs text-green-700",children:"Придут"})]}),(0,s.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:N.declined}),(0,s.jsx)("div",{className:"text-xs text-red-700",children:"Не придут"})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:N.pending}),(0,s.jsx)("div",{className:"text-xs text-yellow-700",children:"Ожидают"})]}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N.totalGuests}),(0,s.jsx)("div",{className:"text-xs text-blue-700",children:"Всего гостей"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(D.I,{placeholder:"Имя гостя",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&b()}),(0,s.jsx)(u.z,{onClick:b,disabled:!o.trim(),children:(0,s.jsx)(T.Z,{size:18})})]}),(0,s.jsxs)(u.z,{variant:"outline",size:"sm",className:"w-full",onClick:()=>d(!0),children:[(0,s.jsx)(Z.Z,{size:16,className:"mr-2"}),"Массовый импорт"]}),r?(0,s.jsx)("div",{className:"flex justify-center py-4",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-accent"})}):0===k.length?(0,s.jsx)("p",{className:"text-center text-muted text-sm py-4",children:"Гости не добавлены"}):(0,s.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:k.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-white rounded-lg border border-muted-foreground/20",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.C,{variant:"confirmed"===e.rsvpStatus?"success":"declined"===e.rsvpStatus?"error":"default",children:"confirmed"===e.rsvpStatus?"Придёт":"declined"===e.rsvpStatus?"Не придёт":"Ожидает"}),e.guestCount>1&&(0,s.jsxs)("span",{className:"text-xs text-muted",children:["+",e.guestCount-1]})]})]}),(0,s.jsx)("button",{onClick:()=>j(e),className:"p-1.5 text-muted hover:text-foreground transition-colors",title:"Скопировать ссылку",children:(0,s.jsx)(B.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>y(e),className:"p-1.5 text-muted hover:text-green-500 transition-colors",title:"Отправить в WhatsApp",children:(0,s.jsx)(G.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>p(e.id),className:"p-1.5 text-muted hover:text-red-500 transition-colors",title:"Удалить",children:(0,s.jsx)(L.Z,{size:16})})]},e.id))}),(0,s.jsx)(M.u,{isOpen:c,onClose:()=>d(!1),title:"Массовый импорт",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted",children:"Введите имена гостей, каждое с новой строки"}),(0,s.jsx)("textarea",{value:m,onChange:e=>g(e.target.value),className:"w-full h-48 px-3 py-2 border border-muted-foreground/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",placeholder:"Айгуль Бекзат Дана ..."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:()=>d(!1),children:"Отмена"}),(0,s.jsx)(u.z,{onClick:v,className:"flex-1",children:"Добавить гостей"})]})]})})]})}var _=l(9001),V=l(2430);function A(){let{event:e,currentTheme:t,previewMode:l,enabledBlocks:a}=h(),{styles:r,fontLinks:n}=(0,_.G)(t);if(!e||!t)return(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-muted",children:"Загрузка превью..."});let o=a();return(0,s.jsxs)("div",{className:"h-full flex items-center justify-center p-4 overflow-auto",children:[n.map(e=>(0,s.jsx)("link",{rel:"stylesheet",href:e},e)),(0,s.jsx)("div",{className:"transition-all duration-300 ".concat("mobile"===l?"w-[375px] h-[812px] rounded-[3rem] border-8 border-gray-800 shadow-2xl":"w-full max-w-4xl h-full rounded-lg border border-muted-foreground/20 shadow-lg"),children:(0,s.jsxs)("div",{className:"w-full h-full overflow-y-auto ".concat("mobile"===l?"rounded-[2.5rem]":"rounded-lg"),style:{...r,backgroundColor:t.colors.primary,fontFamily:t.fonts.body},children:[o.map((l,a)=>(0,s.jsx)(V.H,{block:l,data:e.data,theme:t,isPreview:!0},"".concat(l.type,"-").concat(a))),0===o.length&&(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-muted p-8",children:(0,s.jsxs)("p",{className:"text-center",children:["Включите блоки в панели слева,",(0,s.jsx)("br",{}),"чтобы увидеть превью"]})})]})})]})}function U(){let e=(0,r.useRouter)(),{isAuthenticated:t,isLoading:l}=(0,g.a)(),[m,x]=(0,a.useState)(null),{event:f,isLoading:b,isDirty:v,isSaving:p,activePanel:j,previewMode:y,loadEvent:N,loadThemes:w,setActivePanel:k,setPreviewMode:C,saveEvent:D,publishEvent:I}=h();(0,a.useEffect)(()=>{{let e=window.location.pathname.split("/").filter(Boolean);"editor"===e[0]&&e[1]&&x(e[1])}},[]),(0,a.useEffect)(()=>{l||t||e.push("/")},[l,t,e]),(0,a.useEffect)(()=>{t&&m&&(w(),N(m))},[t,m,w,N]);let F=async()=>{try{await D(),R.default.success("Сохранено")}catch(e){R.default.error("Ошибка сохранения")}},T=async()=>{try{await I(),R.default.success("Приглашение опубликовано!")}catch(e){R.default.error("Ошибка публикации")}};return l||b||!f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent"})}):(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-background",children:[(0,s.jsxs)("header",{className:"flex-none h-14 bg-white border-b border-muted-foreground/10 flex items-center px-4 gap-4",children:[(0,s.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"p-2 hover:bg-muted-foreground/10 rounded-lg transition-colors",children:(0,s.jsx)(n.Z,{size:20})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("h1",{className:"font-medium truncate",children:[f.data.names.person1,f.data.names.person2&&" & ".concat(f.data.names.person2)]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-muted-foreground/10 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>C("desktop"),className:"p-1.5 rounded ".concat("desktop"===y?"bg-white shadow-sm":""),children:(0,s.jsx)(o.Z,{size:18})}),(0,s.jsx)("button",{onClick:()=>C("mobile"),className:"p-1.5 rounded ".concat("mobile"===y?"bg-white shadow-sm":""),children:(0,s.jsx)(i.Z,{size:18})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,s.jsxs)(u.z,{variant:"outline",size:"sm",onClick:F,isLoading:p,children:[(0,s.jsx)(c.Z,{size:16,className:"mr-1"}),"Сохранить"]}),(0,s.jsxs)(u.z,{size:"sm",onClick:T,disabled:"published"===f.status&&!v,children:[(0,s.jsx)(d.Z,{size:16,className:"mr-1"}),"published"===f.status?"Обновить":"Опубликовать"]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-72 flex-none bg-white border-r border-muted-foreground/10 flex flex-col",children:[(0,s.jsx)("div",{className:"flex border-b border-muted-foreground/10",children:[{id:"data",label:"Данные"},{id:"blocks",label:"Блоки"},{id:"theme",label:"Тема"},{id:"guests",label:"Гости"}].map(e=>(0,s.jsx)("button",{onClick:()=>k(e.id),className:"flex-1 py-3 text-sm font-medium transition-colors ".concat(j===e.id?"text-accent border-b-2 border-accent":"text-muted hover:text-foreground"),children:e.label},e.id))}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["data"===j&&(0,s.jsx)(S,{}),"blocks"===j&&(0,s.jsx)(z,{}),"theme"===j&&(0,s.jsx)(E,{}),"guests"===j&&(0,s.jsx)(O,{})]})]}),(0,s.jsx)("div",{className:"flex-1 bg-muted-foreground/5 overflow-hidden",children:(0,s.jsx)(A,{})})]})]})}},8584:function(e,t,l){"use strict";l.d(t,{C:function(){return r}});var s=l(3827),a=l(2169);function r(e){let{className:t,variant:l="default",children:r,...n}=e;return(0,s.jsx)("span",{className:(0,a.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{default:"bg-muted/20 text-muted",success:"bg-green-100 text-green-700",warning:"bg-yellow-100 text-yellow-700",error:"bg-red-100 text-red-700",info:"bg-blue-100 text-blue-700"}[l],t),...n,children:r})}},6651:function(e,t,l){"use strict";l.d(t,{z:function(){return n}});var s=l(3827),a=l(4090),r=l(2169);let n=(0,a.forwardRef)((e,t)=>{let{className:l,variant:a="primary",size:n="md",isLoading:o,children:i,disabled:c,...d}=e;return(0,s.jsx)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-accent text-white hover:bg-accent-light focus:ring-accent",secondary:"bg-foreground text-background hover:bg-foreground/90 focus:ring-foreground",outline:"border-2 border-foreground text-foreground hover:bg-foreground hover:text-background focus:ring-foreground",ghost:"text-foreground hover:bg-foreground/10 focus:ring-foreground"}[a],{sm:"px-3 py-1.5 text-sm rounded-md",md:"px-4 py-2 text-base rounded-lg",lg:"px-6 py-3 text-lg rounded-xl"}[n],l),disabled:c||o,...d,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Загрузка..."]}):i})});n.displayName="Button"},2278:function(e,t,l){"use strict";l.d(t,{I:function(){return n}});var s=l(3827),a=l(4090),r=l(2169);let n=(0,a.forwardRef)((e,t)=>{let{className:l,label:a,error:n,id:o,...i}=e;return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:o,className:"block text-sm font-medium text-foreground mb-1",children:a}),(0,s.jsx)("input",{ref:t,id:o,className:(0,r.cn)("w-full px-3 py-2 border border-muted-foreground/30 rounded-lg","bg-white text-foreground placeholder:text-muted","focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed",n&&"border-red-500 focus:ring-red-500",l),...i}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:n})]})});n.displayName="Input"},492:function(e,t,l){"use strict";l.d(t,{u:function(){return c}});var s=l(3827),a=l(4090),r=l(8745),n=l(8371),o=l(2235),i=l(2169);function c(e){let{isOpen:t,onClose:l,title:c,children:d,size:u="md"}=e;return(0,s.jsx)(r.M,{children:t&&(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:l}),(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:(0,i.cn)("w-full bg-white rounded-2xl shadow-xl overflow-hidden",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[u]),onClick:e=>e.stopPropagation(),children:[c&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-muted-foreground/10",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:c}),(0,s.jsx)("button",{onClick:l,className:"p-1 rounded-lg hover:bg-muted-foreground/10 transition-colors",children:(0,s.jsx)(o.Z,{size:20})})]}),(0,s.jsx)("div",{className:"p-6",children:d})]})})]})})}},313:function(e,t,l){"use strict";l.d(t,{a:function(){return i}});var s=l(4090),a=l(8222);function r(){return localStorage.getItem("token")}function n(e){localStorage.setItem("token",e)}function o(e){localStorage.setItem("user",JSON.stringify(e))}function i(){let[e,t]=(0,s.useState)(null),[l,i]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=function(){let e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),l=r();e&&l&&(t(e),d(!0)),i(!1)},[]);let u=(0,s.useCallback)(async(e,l)=>{try{let s=await a.h.login(e,l);return n(s.token),o(s.user),t(s.user),d(!0),s.user}catch(e){throw console.error("Login failed:",e),e}},[]),m=(0,s.useCallback)(async(e,l,s)=>{try{let r=await a.h.register(e,l,s);return n(r.token),o(r.user),t(r.user),d(!0),r.user}catch(e){throw console.error("Registration failed:",e),e}},[]),x=(0,s.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(null),d(!1)},[]),h=(0,s.useCallback)(async()=>{if(r())try{let e=await a.h.getMe();o(e),t(e)}catch(e){console.error("Failed to refresh user:",e),x()}},[x]);return{user:e,isLoading:l,isAuthenticated:c,login:u,register:m,logout:x,refreshUser:h}}},4494:function(e,t,l){"use strict";l.d(t,{l:function(){return s},r:function(){return a}});let s={hero:[{value:"fullscreen-text",label:"Текст на весь экран"},{value:"photo-bg",label:"Фото на фоне"},{value:"split-screen",label:"Разделённый"}],intro:[{value:"envelope",label:"Конверт"},{value:"swipe-up",label:"Свайп вверх"},{value:"none",label:"Без заставки"}],greeting:[{value:"bilingual",label:"Двуязычное"},{value:"single-lang",label:"Одноязычное"},{value:"with-photo",label:"С фото"}],details:[{value:"cards",label:"Карточки"},{value:"list",label:"Список"},{value:"icon-grid",label:"Иконки в сетке"}],countdown:[{value:"minimal",label:"Минимальный"},{value:"boxed",label:"В рамках"},{value:"large-number",label:"Крупные числа"}],program:[{value:"timeline",label:"Таймлайн"},{value:"cards",label:"Карточки"},{value:"horizontal",label:"Горизонтальный"}],location:[{value:"map-with-button",label:"Карта + кнопка"},{value:"address-only",label:"Только адрес"}],gallery:[{value:"grid",label:"Сетка"},{value:"carousel",label:"Карусель"},{value:"masonry",label:"Masonry"}],rsvp:[{value:"full-form",label:"Полная форма"},{value:"simple-buttons",label:"Приду / Не приду"}],story:[{value:"timeline",label:"Таймлайн"},{value:"slides",label:"Слайды"}],wishes:[{value:"open-text",label:"Свободный текст"},{value:"gift-registry",label:"Реестр подарков"}],dresscode:[{value:"visual-palette",label:"Цветовая палитра"},{value:"text-only",label:"Текст"}],"baby-info":[{value:"photo-stats",label:"Фото + данные"},{value:"milestone",label:"Milestone"}],footer:[{value:"minimal",label:"Минимальный"},{value:"with-hashtag",label:"С хэштегом"}]},a={wedding:{label:"Свадьба",emoji:"\uD83D\uDC92"},sundet:{label:"Сүндет той",emoji:"\uD83D\uDC76"},tusau:{label:"Тұсау кесу",emoji:"\uD83C\uDF80"},birthday:{label:"День рождения",emoji:"\uD83C\uDF82"},jubilee:{label:"Юбилей",emoji:"\uD83C\uDF89"},corporate:{label:"Корпоратив",emoji:"\uD83C\uDFE2"}}}},function(e){e.O(0,[150,9,625,646,144,971,69,744],function(){return e(e.s=327)}),_N_E=e.O()}]);